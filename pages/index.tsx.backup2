import React, { useState, useEffect, useRef } from "react";
import Head from "next/head";

export default function CosmicPortal() {
  const [currentText, setCurrentText] = useState("");
  const [isDeleting, setIsDeleting] = useState(false);
  const [loopNum, setLoopNum] = useState(0);
  const [typingSpeed, setTypingSpeed] = useState(150);
  const canvasRef = useRef(null);

  const texts = [
    "Discover the AI Cosmos",
    "Navigate Tool Constellations", 
    "Command Intelligence",
    "Shape Digital Reality"
  ];

  useEffect(() => {
    const handleType = () => {
      const i = loopNum % texts.length;
      const fullText = texts[i];
      
      setCurrentText(
        isDeleting 
          ? fullText.substring(0, currentText.length - 1)
          : fullText.substring(0, currentText.length + 1)
      );

      setTypingSpeed(isDeleting ? 50 : 150);

      if (!isDeleting && currentText === fullText) {
        setTimeout(() => setIsDeleting(true), 1500);
      } else if (isDeleting && currentText === "") {
        setIsDeleting(false);
        setLoopNum(loopNum + 1);
      }
    };

    const timer = setTimeout(handleType, typingSpeed);
    return () => clearTimeout(timer);
  }, [currentText, isDeleting, loopNum, texts, typingSpeed]);

  // Particle system effect
  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const particles = [];
    const particleCount = 150;
    
    // Create particles
    for (let i = 0; i < particleCount; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 2 + 1,
        speed: Math.random() * 0.5 + 0.1,
        angle: Math.random() * Math.PI * 2,
        hue: Math.random() * 360,
        opacity: Math.random() * 0.5 + 0.1
      });
    }
    
    let animationFrameId;
    
    const render = () => {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      particles.forEach(particle => {
        // Update position
        particle.x += Math.cos(particle.angle) * particle.speed;
        particle.y += Math.sin(particle.angle) * particle.speed;
        
        // Wrap around edges
        if (particle.x > canvas.width) particle.x = 0;
        if (particle.x < 0) particle.x = canvas.width;
        if (particle.y > canvas.height) particle.y = 0;
        if (particle.y < 0) particle.y = canvas.height;
        
        // Draw particle
        ctx.beginPath();
        ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
        ctx.fillStyle = `hsla(${particle.hue}, 100%, 70%, ${particle.opacity})`;
        ctx.fill();
      });
      
      animationFrameId = requestAnimationFrame(render);
    };
    
    render();
    
    const handleResize = () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    };
    
    window.addEventListener('resize', handleResize);
    
    return () => {
      cancelAnimationFrame(animationFrameId);
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  return (
    <div className="min-h-screen relative overflow-hidden bg-black">
      <Head>
        <title>The Cosmic Portal - World's Largest Blogging Platform</title>
        <meta name="description" content="Step through the definitive gateway to living AI entities" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {/* Advanced Particle Canvas */}
      <canvas 
        ref={canvasRef} 
        className="absolute inset-0 z-0"
      />

      {/* Premium Cosmic Background */}
      <div className="absolute inset-0 z-10">
        {/* Deep Space Gradient */}
        <div className="absolute inset-0 bg-gradient-radial from-black via-purple-900/20 to-black"></div>
        
        {/* Nebula Effects */}
        <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse"></div>
        <div className="absolute bottom-1/3 right-1/3 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse" style={{ animationDelay: "2s" }}></div>
        <div className="absolute top-1/3 right-1/4 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl animate-pulse" style={{ animationDelay: "4s" }}></div>
      </div>

      {/* Luxurious Portal Content */}
      <div className="relative z-20 min-h-screen flex flex-col items-center justify-center p-4 text-center">
        {/* Enhanced Portal Entrance Effect */}
        <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
          {/* Multi-layered portal rings */}
          <div className="absolute w-[500px] h-[500px] rounded-full border border-blue-500/30 animate-spin-slow" style={{ animationDuration: "20s" }}></div>
          <div className="absolute w-[400px] h-[400px] rounded-full border border-purple-500/30 animate-spin-slow" style={{ animationDuration: "25s", animationDirection: "reverse" }}></div>
          <div className="absolute w-[300px] h-[300px] rounded-full border border-indigo-500/30 animate-spin-slow" style={{ animationDuration: "30s" }}></div>
          
          {/* Central energy core */}
          <div className="absolute w-32 h-32 rounded-full bg-gradient-radial from-blue-400/40 via-purple-500/30 to-transparent animate-pulse"></div>
        </div>

        <main className="flex flex-col items-center justify-center w-full max-w-6xl">
          {/* Premium Cosmic Greeting */}
          <div className="mb-12 relative">
            {/* Luxurious crown element */}
            <div className="absolute -top-16 left-1/2 transform -translate-x-1/2 w-32 h-16">
              <div className="flex justify-center space-x-2">
                {[...Array(5)].map((_, i) => (
                  <div key={i} className="w-2 h-8 bg-gradient-to-t from-yellow-400 to-yellow-200 rounded-t-full animate-bounce" style={{ animationDelay: `${i * 0.1}s` }}></div>
                ))}
              </div>
            </div>
            
            <h1 className="text-5xl md:text-7xl font-extrabold text-white mb-8 animate-fade-in-drop">
              The <span className="bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-500 bg-clip-text text-transparent">Cosmic Portal</span>
            </h1>
            
            <div className="h-20 md:h-24 flex items-center justify-center mb-6">
              <p className="text-3xl md:text-4xl text-gray-200 font-light tracking-wide">
                {currentText}
                <span className="ml-1 animate-blink-fast">|</span>
              </p>
            </div>
            
            <p className="text-xl text-gray-300 mt-4 max-w-3xl mx-auto font-light tracking-wide">
              Step through the definitive gateway to{" "}
              <span className="font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300">15,420+</span>{" "}
              living AI entities across the digital cosmos
            </p>
          </div>

          {/* Premium Portal Search with Predictive Results */}
          <div className="w-full max-w-3xl mb-16 relative">
            <div className="relative group">
              <div className="absolute -inset-0.5 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl blur opacity-75 group-hover:opacity-100 transition-all duration-500"></div>
              <div className="relative bg-black/40 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-1">
                <div className="flex">
                  <input
                    type="text"
                    placeholder="Speak your need into the cosmic void..."
                    className="flex-1 px-6 py-5 bg-transparent text-white placeholder-gray-400 focus:outline-none text-lg"
                  />
                  <button className="px-8 py-5 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl text-white font-bold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105">
                    <span className="flex items-center">
                      <span>Search</span>
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clipRule="evenodd" />
                      </svg>
                    </span>
                  </button>
                </div>
              </div>
            </div>
            
            {/* Predictive Results Preview */}
            <div className="absolute left-0 right-0 mt-4 bg-black/60 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <div className="flex justify-between items-center mb-3">
                <h3 className="text-gray-300 font-medium">Predicted Searches</h3>
                <span className="text-xs text-gray-500">AI-Powered</span>
              </div>
              <div className="space-y-2">
                {[
                  "Best AI image generators 2024",
                  "Top AI writing assistants",
                  "AI tools for video editing",
                  "Machine learning platforms comparison"
                ].map((item, index) => (
                  <div key={index} className="flex items-center p-2 hover:bg-gray-800/50 rounded-lg cursor-pointer transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 text-blue-400 mr-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clipRule="evenodd" />
                    </svg>
                    <span className="text-gray-400 text-sm">{item}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Interactive Constellations Navigation */}
          <div className="w-full mb-16">
            <h2 className="text-3xl font-bold text-white mb-10 relative inline-block">
              <span className="relative z-10">Cosmic Constellations</span>
              <div className="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500/50 via-purple-500/50 to-indigo-500/50 rounded-full"></div>
            </h2>
            
            <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
              {[
                { name: "NLP Nebula", count: "4,230", color: "from-blue-500 to-blue-700", icon: "ðŸ’¬" },
                { name: "Vision Cluster", count: "2,870", color: "from-purple-500 to-purple-700", icon: "ðŸ‘ï¸" },
                { name: "Audio Dimension", count: "1,560", color: "from-indigo-500 to-indigo-700", icon: "ðŸ”Š" },
                { name: "Code Singularity", count: "3,420", color: "from-teal-500 to-teal-700", icon: "ðŸ’»" }
              ].map((sector, index) => (
                <div 
                  key={index}
                  className="group relative bg-black/30 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 hover:border-purple-500/50 transition-all duration-500 hover:-translate-y-2 cursor-pointer overflow-hidden"
                >
                  <div className="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                  <div className={`absolute top-0 right-0 w-24 h-24 bg-gradient-to-r ${sector.color} rounded-full -translate-y-12 translate-x-12 opacity-10 group-hover:opacity-20 transition-opacity duration-500`}></div>
                  
                  <div className="relative z-10">
                    <div className={`w-16 h-16 rounded-2xl bg-gradient-to-r ${sector.color} flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform duration-300 mx-auto`}>
                      {sector.icon}
                    </div>
                    <h3 className="text-xl font-bold text-white mb-2">{sector.name}</h3>
                    <p className="text-gray-400 mb-3">AI Tools</p>
                    <div className="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300">{sector.count}</div>
                    
                    {/* Activity indicator */}
                    <div className="mt-4 flex items-center">
                      <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse mr-2"></div>
                      <span className="text-xs text-gray-500">Active</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Premium Dimensional Gateways */}
          <div className="w-full mb-16">
            <h2 className="text-3xl font-bold text-white mb-10 text-center">Dimensional Gateways</h2>
            
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
              {[
                { 
                  label: "Explore Cosmos", 
                  desc: "Navigate AI constellations", 
                  icon: "ðŸŒ€", 
                  color: "from-blue-500 to-blue-700",
                  stats: "15K+ Tools"
                },
                { 
                  label: "Forge Reality", 
                  desc: "Build with AI entities", 
                  icon: "âš¡", 
                  color: "from-purple-500 to-purple-700",
                  stats: "2.3K Projects"
                },
                { 
                  label: "Access Archives", 
                  desc: "Infinite AI knowledge", 
                  icon: "ðŸ§ ", 
                  color: "from-indigo-500 to-indigo-700",
                  stats: "50K+ Articles"
                },
                { 
                  label: "Join Collective", 
                  desc: "Connect with AI minds", 
                  icon: "ðŸŒ", 
                  color: "from-teal-500 to-teal-700",
                  stats: "1.2M Users"
                }
              ].map((portal, index) => (
                <div 
                  key={index}
                  className="group relative bg-black/30 backdrop-blur-xl border border-gray-700/50 rounded-3xl p-8 hover:border-purple-500/50 transition-all duration-700 hover:-translate-y-3 cursor-pointer overflow-hidden"
                >
                  {/* Glowing border effect */}
                  <div className="absolute inset-0 rounded-3xl overflow-hidden">
                    <div className={`absolute inset-0 bg-gradient-to-r ${portal.color} opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-700`}></div>
                  </div>
                  
                  <div className="relative z-10">
                    <div className={`w-20 h-20 rounded-2xl bg-gradient-to-r ${portal.color} flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform duration-500 mx-auto shadow-2xl`}>
                      {portal.icon}
                    </div>
                    <h3 className="text-2xl font-bold text-white mb-3">{portal.label}</h3>
                    <p className="text-gray-300 mb-4">{portal.desc}</p>
                    <div className="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300">{portal.stats}</div>
                    
                    {/* Animated arrow */}
                    <div className="mt-6 flex justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-purple-400 animate-bounce-x" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 5l7 7m0 0l-7 7m7-7H3" />
                      </svg>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Enhanced Cosmic Activity Feed */}
          <div className="w-full max-w-4xl mb-16">
            <div className="flex items-center justify-between mb-8">
              <h2 className="text-3xl font-bold text-white">Cosmic Activity</h2>
              <div className="flex space-x-2">
                <span className="px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-sm">Live</span>
                <span className="px-3 py-1 bg-purple-900/30 text-purple-300 rounded-full text-sm">Real-time</span>
              </div>
            </div>
            
            <div className="space-y-4">
              {[
                { event: "SUPERNOVA", name: "GPT-5 Launch", time: "2 minutes ago", magnitude: 9.8, type: "tool_birth" },
                { event: "GRAVITY_WAVE", name: "Midjourney v6 Adoption", time: "1 hour ago", magnitude: 8.9, type: "mass_adoption" },
                { event: "QUANTUM_ENTANGLE", name: "DALL-E + Whisper Merger", time: "3 hours ago", magnitude: 8.2, type: "tool_merger" },
                { event: "BLACK_HOLE", name: "Deprecated Tool Sunset", time: "5 hours ago", magnitude: 7.5, type: "tool_sunset" }
              ].map((activity, index) => (
                <div key={index} className="group bg-black/30 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-5 hover:border-purple-500/50 transition-all duration-300 hover:shadow-2xl">
                  <div className="flex items-start">
                    <div className="mr-4 mt-1">
                      <div className={`w-3 h-3 rounded-full ${
                        activity.type === "tool_birth" ? "bg-blue-500" : 
                        activity.type === "mass_adoption" ? "bg-purple-500" : 
                        activity.type === "tool_merger" ? "bg-green-500" : "bg-red-500"
                      } animate-pulse`}></div>
                    </div>
                    <div className="flex-1">
                      <div className="flex justify-between">
                        <span className={`font-bold ${
                          activity.type === "tool_birth" ? "text-blue-400" : 
                          activity.type === "mass_adoption" ? "text-purple-400" : 
                          activity.type === "tool_merger" ? "text-green-400" : "text-red-400"
                        }`}>
                          {activity.event}
                        </span>
                        <span className="text-gray-500 text-sm">{activity.time}</span>
                      </div>
                      <div className="text-white font-bold text-xl my-2">{activity.name}</div>
                      <div className="flex items-center">
                        <div className="w-full bg-gray-700 rounded-full h-2 mr-4">
                          <div 
                            className={`h-2 rounded-full ${
                              activity.type === "tool_birth" ? "bg-blue-500" : 
                              activity.type === "mass_adoption" ? "bg-purple-500" : 
                              activity.type === "tool_merger" ? "bg-green-500" : "bg-red-500"
                            }`} 
                            style={{ width: `${activity.magnitude * 10}%` }}
                          ></div>
                        </div>
                        <div className="text-yellow-400 font-bold whitespace-nowrap">Magnitude: {activity.magnitude}</div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Call to Action Section */}
          <div className="w-full max-w-4xl mb-16 text-center">
            <div className="bg-gradient-to-r from-blue-900/20 to-purple-900/20 backdrop-blur-xl border border-gray-700/50 rounded-3xl p-12 relative overflow-hidden">
              <div className="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMCUiIGN5PSIxMCUiIHI9IjEiIGZpbGw9IiNGRkYiIGZpbGwtb3BhY2l0eT0iMC4xIi8+PGNpcmNsZSBjeD0iOTAlIiBjeT0iNTAlIiByPSIxLjUiIGZpbGw9IiNGRkYiIGZpbGwtb3BhY2l0eT0iMC4wOCIvPjxjaXJjbGUgY3g9IjUwJSIgY3k9IjkwJSIgcj0iMC41IiBmaWxsPSIjRkZGIiBmaWxsLW9wYWNpdHk9IjAuMDUiLz48L3N2Zz4=')] opacity-30"></div>
              
              <div className="relative z-10">
                <h2 className="text-4xl font-bold text-white mb-6">Ready to Traverse the Digital Cosmos?</h2>
                <p className="text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
                  Join millions of explorers in the world's most advanced AI discovery platform
                </p>
                
                <div className="flex flex-col sm:flex-row justify-center gap-6">
                  <button className="px-10 py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl text-white font-bold text-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-2xl">
                    Begin Your Journey
                  </button>
                  <button className="px-10 py-4 bg-transparent border-2 border-gray-600 rounded-2xl text-white font-bold text-lg hover:border-white transition-all duration-300 transform hover:scale-105">
                    Explore the Archives
                  </button>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>

      {/* Custom Styles */}
      <style jsx global>{`
        @keyframes fade-in-drop {
          from { 
            opacity: 0; 
            transform: translateY(-30px) perspective(500px) rotateX(20deg);
          }
          to { 
            opacity: 1; 
            transform: translateY(0) perspective(500px) rotateX(0);
          }
        }
        
        @keyframes blink-fast {
          0%, 100% { opacity: 1; }
          50% { opacity: 0; }
        }
        
        @keyframes bounce-x {
          0%, 100% { transform: translateX(0); }
          50% { transform: translateX(10px); }
        }
        
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        .animate-fade-in-drop {
          animation: fade-in-drop 1.2s cubic-bezier(0.22, 0.61, 0.36, 1) both;
        }
        
        .animate-blink-fast {
          animation: blink-fast 0.8s infinite;
        }
        
        .animate-bounce-x {
          animation: bounce-x 1s infinite;
        }
        
        .animate-spin-slow {
          animation: spin-slow linear infinite;
        }
        
        .bg-gradient-radial {
          background: radial-gradient(circle, var(--tw-gradient-stops));
        }
        
        .backdrop-blur-xl {
          backdrop-filter: blur(24px);
          -webkit-backdrop-filter: blur(24px);
        }
      `}</style>
    </div>
  );
}